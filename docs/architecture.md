# Архитектура системы

Система анализа производительности вывода глубоких нейросетевых моделей
состоит из нескольких основных компонент.

1. **Target Hardware**. Целевой компьютер, на котором выполняется вывод
   моделей.
1. **FTP server**. FTP-сервер используется для хранения данных
   (docker-образ для целевого компьютера, конфигурационный файл бенчмарка).
1. **Integrator**. Управляющий компонент, который обеспечивает
   развертывание инфраструктуры на целевых компьютерах, запуск вывода
   глубоких моделей и сбор результатов производительности с целью
   последующего предоставления общего доступа через сеть Интернет.

![](./imgs/architecture.png)

Цикл работы системы бэнчмаркинга включает следующие этапы.
1. Integrator создает структуру директорий на FTP-сервере, формирует
   docker-образ тестового компьютера и конфигурационный файл
   для запуска вывода глубоких моделей на каждом целевом компьютере
   (Target Hardware).
1. Integrator запускает клиентский скрипт для развертывания docker-образа.
1. При запуске клиентского скрипта выполняется соединение с FTP-сервером.
1. Копируется docker-образ на целевую инфраструктуру (Target Hardware)
   и выполняется его развертывание.
1. Integrator последовательно запускает тесты производительности
   на каждой целевой инфраструктуре (Target Hardware) согласно перечню,
   приведенному в конфигурационном файле. Каждый тест — запуск вывода
   некоторой модели с определенным набором параметров. Тест запускается
   в отдельном процессе, который возвращает набор метрик производительности.
1. По завершении теста Integrator собирает метрики производительности
   в единую таблицу, которая впоследствии конвертируется в html-страницу
   для публикации в открытом доступе.
