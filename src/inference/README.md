# Тестирование глубоких моделей с использованием Inference Engine в составе Intel® Distribution of OpenVINO™ toolkit

## Тестирование глубоких моделей в синхронном режиме

**Командная строка для решения задачи классификации изображений**
```bash
python inference_sync_mode.py \
    -t classification -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    --labels <path_to_labels>/image_net_synset.txt
```

Результат выполнения: набор наиболее вероятных классов, которым принадлежит
изображение.

**Командная строка для решения задачи семантической сегментации изображений**
```bash
python inference_sync_mode.py \
    -t segmentation -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    --color_map <path_to_color_map>/color_map.txt
```

Результат выполнения: изображение, разрешение которого совпадает с разрешением
входного изображения; интенсивность пикселя соответствует классу объектов,
которому принадлежит даннная точка на изображении.

**Командная строка для решения задачи детектирования объектов**
```bash
python inference_sync_mode.py \
    -t detection -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    -d <device>
```

Результат выполнения: набор окаймляющих прямоугольников, соответствующих
обнаруженным объектам.

## Тестирование глубоких моделей в асинхронном режиме

**Командная строка для решения задачи классификации изображений**
```bash
python inference_async_mode.py \
    -t classification -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    --labels <path_to_labels>/image_net_synset.txt
```

Результат выполнения: набор наиболее вероятных классов, которым принадлежит
изображение.

**Командная строка для решения задачи детектирования объектов**
```bash
python inference_async_mode.py \
    -t detection -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    -d <device>
```

Результат выполнения: набор окаймляющих прямоугольников, соответствующих
обнаруженным объектам.

**Командная строка для решения задачи семантической сегментации изображений**
```bash
python inference_async_mode.py \
    -t segmentation -i <path_to_image>/<image_name> \
    -m <path_to_model>/<model_name>.xml -w <path_to_weights>/<model_name>.bin \
    --color_map <path_to_color_map>/color_map.txt
```

Результат выполнения: изображение, разрешение которого совпадает с разрешением
входного изображения; интенсивность пикселя соответствует классу объектов,
которому принадлежит даннная точка на изображении.

## Параметры скриптов

### Параметры для синхронного режима тестирования

Обязательные параметры:
- `-m / --model` - путь до xml файла с описанием модели.
- `-w / --weights` - путь до бинарного файла, содержащего веса обученной модели.
- `-i / --input` - путь до изображения или директории с изображениями,
  расширения файлов `.jpg`, `.png`, `.bmp` и т.д.

Необязательные параметры:
- `-b / --batch_size` - количество изображений, которые будут обработаны
  за один проход сети. По умолчанию равно `1`.
- `-t / --task` - решаемая задача (`classification`, `detection`, `segmentation`).
  По умолчанию обработка выхода не производится.
- `-l / --extension` - абсолютный путь к библиотеке 
  с реализацией нестандартных слоёв.
- `-d / --device` - оборудование (`CPU`, `GPU`, `FPGA`, `MYRIAD`),
  на котором будет выполнен проход сети. По умолчанию вывод осуществляется
  на `CPU`.
- `-nthreads / --number_threads` - максимальное число потоков исполнения вывода.
  По умолчанию будет использоваться максимальное количество потоков.
- `-nt / --number_top` - число лучших результатов, выводимых
  при решении задачи классификации. По умолчанию выводится `10` наилучших
  результатов.
- `-ni / --number_iter` - количество прямых проходов сети. По умолчанию
  выполняется один проход сети.
- `-mi / -mininfer` - минимальное допустимое время выполнения вывода.
  По умолчанию равно нулю.
- `--labels` - путь до файла с перечнем классов при решении задачи
  классификации.
- `--prob_threshold` - порог вероятности для фильтрации результатов и 
  отбрасывания лишних окаймляющих прямоугольников  при решении задачи детектирования.
  По умолчанию равен `0.5`.
- `--color_map` - путь до карты цветов при решении задачи семантической
  сегментации.

### Параметры для aсинхронного режима тестирования

Обязательные параметры:
- `-m / --model` - путь до xml файла с описанием модели.
- `-w / --weights` - путь до бинарного файла, содержащего веса обученной модели.
- `-i / --input` - путь до изображения или директории с изображениями,
  расширения файлов `.jpg`, `.png`, `.bmp` и т.д.

Необязательные параметры:
- `-r / --request` - количество запросов на одновременное выполнения вывода.
  По умолчанию выставляется оптимальное количество запросов.
- `-b / --batch_size` - количество изображений, которые будут обработаны
  за один проход сети. По умолчанию равно `1`.
- `-t / --task` - решаемая задача (`classification`, `detection`, `segmentation`).
  По умолчанию обработка выхода не производится.
- `-l / --extension` - абсолютный путь к библиотеке 
  с реализацией нестандартных слоёв.
- `-d / --device` - оборудование (`CPU`, `GPU`, `FPGA`, `MYRIAD`),
  на котором будет выполнен проход сети. По умолчанию вывод осуществляется
  на `CPU`.
- `-nthreads / --number_threads` - максимальное число потоков исполнения вывода.
  По умолчанию будет использоваться максимальное количество потоков.
- `-nstreams / --number_streams` - максимальное число потоков исполнения запросов на    вывод. По умолчанию выставляется оптимальное значение. Оптимальное значение зависит
  от исполняемого устройства.
- `-nt / --number_top` - число лучших результатов, выводимых
  при решении задачи классификации. По умолчанию выводится `10` наилучших
  результатов.
- `-ni / --number_iter` - количество прямых проходов сети. По умолчанию
  выполняется один проход сети.
- `--labels` - путь до файла с перечнем классов при решении задачи
  классификации.
- `--prob_threshold` - порог вероятности для фильтрации результатов и 
  отбрасывания лишних окаймляющих прямоугольников при решении задачи детектирования.
  По умолчанию равен `0.5`.
- `--color_map` - путь до карты цветов при решении задачи семантической
  сегментации.
